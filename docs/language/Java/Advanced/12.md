# BÃ i 12: Threads

## 1.Giá»›i thiá»‡u

::: tip ğŸ’¡ <b>THREADS</b> LÃ€ GÃŒ ? 

`Threads` (*Luá»“ng*) cho phÃ©p hoáº¡t Ä‘á»™ng hiá»‡u quáº£ hÆ¡n báº±ng cÃ¡ch cháº¡y nhiá»u thá»© cÃ¹ng lÃºc

==> Sá»­ dá»¥ng Ä‘á»ƒ thá»±c thi cÃ¡c **tÃ¡c vá»¥ phá»©c táº¡p** trong ná»n mÃ  khÃ´ng lÃ m giÃ¡n Ä‘oáº¡n chÆ°Æ¡ng trÃ¬nh chÃ­nh
:::

CÃ³ 2 cÃ¡ch Ä‘á»ƒ táº¡o `Thread` : 

- Sá»­ dá»¥ng báº±ng cÃ¡ch káº¿ thá»«a lá»›p `Thread` vÃ  Ä‘Ã¨ phÆ°Æ¡ng thá»©c `run()` nhÆ° sau: 
  
  ```java
  public class Main extends Thread{
      public void run(){
          System.out.println("Code Ä‘ang cháº¡y luá»“ng run");
      }
  }
  ```

- CÃ¡ch khÃ¡c â¨ Bá»• sung tá»« interface `Runnable` nhÆ° sau : 
  
  ```java
  public class Main implements Runnable{
      public void run(){
      Â Â Â Â System.out.println("Code Ä‘ang cháº¡y luá»“ng run");
  Â Â Â Â }
  }
  ```

## 2.Sá»­ dá»¥ng

- Náº¿u báº¡n sá»­ dá»¥ng cÃ¡ch káº¿ thá»«a lá»›p `Thread`, ta cÃ³ thá»ƒ cháº¡y luá»“ng báº±ng cÃ¡ch sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `start()` : 

```java
public class Main extends Thread {
  public static void main(String[] args) {
    Main thread = new Main();
    thread.start();
    System.out.println("Code nÃ y náº±m bÃªn ngoÃ i luá»“ng");
  }
  public void run() {
    System.out.println("Code nÃ y Ä‘ang cháº¡y trong luá»“ng");
  }
}
/* Code nÃ y Ä‘ang cháº¡y trong luá»“ng
   Code nÃ y náº±m bÃªn ngoÃ i luá»“ng    */
```

- Náº¿u sá»­ dá»¥ng bá»• sung interface `Runnable`, thÃ¬ ta pháº£i táº¡o Ä‘á»‘i tÆ°á»£ng `Thread` vÃ  gá»i phÆ°Æ¡ng thá»©c `start()` nhÆ° sau : 
  
  ```java
  public class Main implements Runnable {
    public static void main(String[] args) {
      Main obj = new Main();
      Thread thread = new Thread(obj);
      thread.start();
      System.out.println("Code nÃ y náº±m bÃªn ngoÃ i luá»“ng");
    }
    public void run() {
      System.out.println("Code nÃ y Ä‘ang cháº¡y trong luá»“ng");
    }
  }
  /* Code nÃ y Ä‘ang cháº¡y trong luá»“ng
     Code nÃ y náº±m bÃªn ngoÃ i luá»“ng    */
  ```

::: tip <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/07/30-15-17-12-icons8-comparing.png" width="30"> Sá»± khÃ¡c nhau giá»¯a 2 cÃ¡i trÃªn 

Äiá»ƒm chÃ­nh khÃ¡c nhau lÃ  khi báº¡n dÃ¹ng **káº¿ thá»«a** lá»›p `Thread`, báº¡n khÃ´ng thá»ƒ káº¿ thá»«a lá»›p nÃ o khÃ¡c, cÃ²n bá»• sung interface `Runnable` thÃ¬ cÃ³ thá»ƒ.
:::

::: warning <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/02/08-17-36-14-Professor%20Male.png" width="30"> Váº¥n Ä‘á» Ä‘áº·t ra

NhÆ° báº¡n Ä‘Ã£ biáº¿t thÃ¬ `Thread` sáº½ cháº¡y song song vá»›i chÆ°Æ¡ng trÃ¬nh, váº­y thÃ¬ lÃ m sao nÃ³ cÃ³ thá»ƒ biáº¿t thá»© tá»± cháº¡y cá»§a tá»«ng `Thread`, váº¥n Ä‘á» Ä‘Ã³ gá»i lÃ  

> ğŸ”¥ VÃ­ dá»¥ khi chÆ°Æ¡ng trÃ¬nh `threads` vÃ  `main` cÃ¹ng Ä‘á»c vÃ  ghi biáº¿n `x` thÃ¬ sáº½ xáº£y ra lá»—i khÃ´ng mong muá»‘n vÃ¬ thá»© tá»± thá»±c hiá»‡n.
:::

```java
public class Main extends Thread{
    public static int amount = 0;

    public static void main(String[] args){
        Main thread = new Main();
        thread.start();
        System.out.println(amount);
        amount++;
        System.out.println(amount);
    }
    public void run(){
        amount++;
    }
}
// 0 2
```

> ==> NhÆ° cÃ¡c báº¡n Ä‘Ã£ tháº¥y, thÃ¬ lá»—i vÃ  khi cá»‘ cháº¡y nÃ³ sáº½ khÃ´ng cho ta káº¿t quáº£ mong muá»‘n  !!! 

::: tip ğŸ’¡ GIáº¢I QUYáº¾T

CÃ¡ch tá»‘t nháº¥t lÃ  báº¡n háº¡n cháº¿ sá»­ dá»¥ng `attribute` chung cho hÃ m `thread` vÃ  `main`. Náº¿u báº¯t buá»™c pháº£i sá»­ dá»¥ng, hÃ£y sá»­ dá»¥ng phÆ°Æ¡ng thá»©c `isAlive()` nhÆ° sau : 

```java
public class Main extends Thread{
    public static int amount = 0;

    public static void main(String[] args){
        Main thread = new Main();
        thread.start();
        while(thread.isAlive()){
            System.out.println("Äá»£i xá»­ lÃ½ xong Ä‘Ã£");
        }
        System.out.println("Amount = " + amount);
        amount++;
        System.out.println("Amount = " + amount);
    }
    public void run(){
        amount++;
    }
}
// Äá»£i xá»­ lÃ½ xong Ä‘Ã£
// Amount = 1;
// Amount = 2;
```
:::