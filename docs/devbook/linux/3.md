# B√†i 3: Shell

## 1. Thay ƒë·ªïi shell m·∫∑c ƒë·ªãnh

H·∫ßu h·∫øt c√°c distro ƒë·ªÅu s·ª≠ d·ª•ng `BASH` (**B**ource **A**gain **Sh**ell) l√†m `shell` m·∫∑c ƒë·ªãnh, tuy nhi√™n c√≥ r·∫•t nhi·ªÅu `shell` kh√°c nh∆∞: `ZSH`, `FISH`....

Ta s·ª≠ d·ª•ng l·ªánh `chsh` v·ªõi m·ªôt s·ªë tu·ª≥ ch·ªçn sau:

| Tu·ª≥ ch·ªçn | Ch·ª©c nƒÉng                       |
| -------- | ------------------------------- |
| -s       | ƒê·∫∑t l·∫°i `shell`¬†m·∫∑c ƒë·ªãnh        |
| -l       | Danh s√°ch c√°c `shell`¬†trong m√°y |
| -h       | H·ªó tr·ª£ s·ª≠ d·ª•ng                  |
| -v       | Hi·ªÉn th·ªã phi√™n b·∫£n              |

- L·ªánh `chsh -l` ƒë·ªÉ hi·ªÉn th·ªã danh s√°ch c√°ch `shell` trong m√°y
  
  ```bash:no-line-numbers
  $ chsh -l
  > /bin/sh
  > /bin/bash
  > /sbin/nologin
  > /usr/bin/sh
  > /usr/bin/bash
  > /usr/sbin/nologin
  > /usr/bin/fish
  ```
  
  ::: warning ‚ö†Ô∏è L∆ØU √ù
  
  N·∫øu l·ªánh `chsh -l` kh√¥ng kh·∫£ d·ª•ng h√£y s·ª≠ d·ª•ng l·ªánh `cat /etc/shells`
  
  :::

- L·ªánh `chsh -s` ƒë·ªÉ chuy·ªÉn `shell` m·∫∑c ƒë·ªãnh
  
  ```bash:no-line-numbers
  $ chsh -s /usr/bin/fish
  > Changing shell for user
  > Shell changed
  ```
  
  > ü§îN·∫øu b·∫°n ch·ªâ mu·ªën ƒë·ªïi `shell` cho ng∆∞·ªùi d√πng `newUser` l√†m nh∆∞ sau:
  > 
  > ```bash:no-line-numbers
  > $ chsh -s /usr/bin/fish newUser
  > ```
  
  ==> C√≥ th·ªÉ s·ª≠ d·ª•ng l·ªánh `echo $SHELL` ƒë·ªÉ ki·ªÉm tra

::: tip üí°GHI NH·ªö

- `Shell` c≈©ng ƒë∆∞·ª£c g·ªçi l√† `CLI` (*Command Line Interface*) - giao di·ªán d√≤ng l·ªánh

- N·∫øu b·∫°n mu·ªën s·ª≠ d·ª•ng `shell` n√†o ch·ªâ c·∫ßn c√†i ƒë·∫∑t n√≥ b·∫±ng l·ªánh:
  
  ```bash
  $ sudo apt-get install <shell_name>
  ```

:::

## 2. C√°c ti·ªán √≠ch bash shell

### Thay ƒë·ªïi hi·ªÉn th·ªã prompt

M·∫∑c ƒë·ªãnh th√¨ `prompt` kh√° d√†i, n·∫øu b·∫°n mu·ªën thay ƒë·ªïi h√£y s·ª≠ d·ª•ng `PS1` trong v·ªõi c√°c tu·ª≥ ch·ªçn d∆∞·ªõi ƒë√¢y

> ƒê√¢y l√† v√≠ d·ª• m·∫∑c ƒë·ªãnh:
> 
> ![Screenshot 2022-02-14 114618.png](https://raw.githubusercontent.com/Zenfection/Image/master/2022/02/14-11-46-33-Screenshot%202022-02-14%20114618.png)

| Tu·ª≥ ch·ªçn                 | Ch·ª©c nƒÉng                                                | Hi·ªÉn th·ªã                     |
| ------------------------ | -------------------------------------------------------- | ---------------------------- |
| PS1='\w$'                | ƒê∆∞·ªùng d·∫´n th∆∞ m·ª•c                                        | `/mnt/c/Users/zen`\$         |
| PS1='\h\$'               | Hostname                                                 | `Latitude-5501`$             |
| PS1='\u\$'               | Username                                                 | `zenfection`$                |
| PS1='\t\$'<br>PS1='\@\$' | Th·ªùi gian ƒë·ªãnh d·∫°ng 24 gi·ªù<br>Th·ªùi gian ƒë·ªãnh d·∫°ng 12 gi·ªù | `11:49:18`$<br> `11:49 AM`\$ |
| PS1='!\$'                | S·ªë c√¢u l·ªánh ƒë√£ d√πng                                      | `131`$                       |
| PS1='dude\$'             | T√™n ƒë·ªãnh s·∫µn                                             | `dude`$                      |

### D√≤ng l·ªánh c∆° b·∫£n

M·ªôt s·ªë `shortcut` c∆° b·∫£n ƒë√£ ƒë∆∞·ª£c tr√¨nh b√†y trong `B√†i 1: GNU/Linux`

B·ªï sung th√™m c√°c l·ªánh truy c·∫≠p l·ªãch s·ª≠ sau:

| L·ªánh                                  | Ch·ª©c nƒÉng                                                                         |
| ------------------------------------- | --------------------------------------------------------------------------------- |
| \~/.bash\_history                     | Danh s√°ch `500`¬†l·ªánh g·∫ßn nh·∫•t ƒë√£ d√πng                                             |
| history<br>history \| grep `key_word` | Hi·ªÉn th·ªã c√°c c√¢u l·ªánh ƒë√£ d√πng<br>Hi·ªÉn th·ªã c√°c c√¢u l·ªánh ƒë√£ d√πng c√≥ ch·ª©a `key_word` |

### T·∫°o l·ªánh b·∫±ng Alias

B·∫°n s·ª≠ d·ª•ng h·∫±ng ng√†y m·ªôt c√¢u l·ªánh d√†i, v√† b·∫°n mu·ªën r√∫t ng·∫Øn n√≥ l·∫°i theo c√°ch ri√™ng c·ªßa b·∫°n, h√£y s·ª≠ d·ª•ng l·ªánh `Alias` v·ªõi c√∫ ph√°p

```bash:no-line-numbers
$ alias t√™n_t·ª±_ƒë·∫∑t = 'c√¢u l·ªánh'
# V√≠ d·ª•
$ alias update = 'sudo apt-get update'
```

Khi b·∫°n g√µ `update` th√¨ `shell` s·∫Ω t·ª± hi·ªÉu l√† `sudo apt-get update`

::: tip üí°KI·∫æN TH·ª®C

C√°c c·∫•u h√¨nh c·ªßa `alias` n·∫±m ·ªü file `.bash-aliased` trong th∆∞ m·ª•c `home` 

```bash:no-line-numbers
$ cat ~/.bash-aliased #hi·ªÉn th·ªã c√°c alias ƒë√£ c·∫•u h√¨nh
```

:::

### X√°c ƒë·ªãnh file trong h·ªá th·ªëng

Nh∆∞ b·∫°n ƒë∆∞·ª£c bi·∫øt, ƒë·ªÉ t√¨m ki·∫øm file ta s·ª≠ d·ª•ng l·ªánh `find` nh∆∞ng l·ªánh `locate` c√≤n c√≥ th·ªÉ t√¨m ki·∫øm nhanh h∆°n r·∫•t nhi·ªÅu

B·∫°n c√≥ th·ªÉ c√†i ƒë·∫∑t n√≥ v·ªõi t√™n g√≥i l√† `mlocate`

::: tip üí° C√ÅCH HO·∫†T ƒê·ªòNG

L·ªánh `locate` t√¨m ki·∫øm th√¥ng qua c∆° s·ªü d·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√¥ng qua l·ªánh `updatedb`

> Khi b·∫°n c√†i ƒë·∫∑t `mlocate`, l·ªánh `updatedb` s·∫Ω ƒë∆∞·ª£c ch·∫°y m·ªói `24h`
> 
> N·∫øu b·∫°n c·∫≠p nh·∫≠t th·ªß c√¥ng s·∫Ω c√≥ h∆°i m·∫•t th·ªùi gian

<img title="" src="https://raw.githubusercontent.com/Zenfection/Image/master/2022/02/14-12-07-03-Screenshot%202022-02-14%20120654.png" alt="Screenshot 2022-02-14 120654.png" width="600">

:::

::: warning ‚ö†Ô∏è L∆ØU √ù

L·ªánh `locate` tuy nhanh v√† m·∫°nh h∆°n, nh∆∞ng v·∫´n c√≤n thi·∫øu nhi·ªÅu t√≠nh nƒÉng c·ªßa l·ªánh `find`

:::