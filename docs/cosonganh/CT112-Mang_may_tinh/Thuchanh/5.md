# Bu·ªïi h√†nh bu·ªói 5

::: tip üìÅ T√ÄI NGUY√äN

[Download t√†i li·ªáu bu·ªïi 5](https://drive.google.com/file/d/1mPP6ZO6n-F_L1N2NykTZqq-8acGWFAJm/preview)
:::

::: warning ‚ö†Ô∏è L∆ØU √ù

L∆∞·ª£c b·ªõt b√†i `16` v√† `17` v√¨ c√≥ th·ªÉ n√≥ qu√° kh√≥ !!!
:::

## 1.Ki·∫øn th·ª©c

### Giao th·ª©c `HTTP`

`Hyper Text Transfer Protocol` (*[HTTP](https://vi.wikipedia.org/wiki/Hypertext_Transfer_Protocol)*) l√† m·ªôt giao th·ª©c trong d·ªãch v·ª• `WWW` (*Wordld Wide Web*) c·ªßa `Internet`, s·ª≠ d·ª•ng k·∫øt n·ªëi [TCP](https://vi.wikipedia.org/wiki/TCP) gi·ªØa `client` v√† `server` 

> M√¥ h√¨nh `Client` v√† `Server`
>
> <br>
> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-13-05-42-socket_client_server.webp">

::: tip üí° M·∫∏O

- `TCP` l√† giao th·ª©c truy·ªÅn d·ªØ li·ªáu c√≥ ki·ªÉm tra t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu, tr∆∞·ªõc ng∆∞·ª£c v·ªõi `UDP` l√† kh√¥ng ki·ªÉm tra m√† g·ª≠i v√† nh·∫≠n lu√¥n

- `TCP` ch·∫≠m h∆°n so v·ªõi `UDP` nh∆∞ng l·∫°i ƒë·∫£m b·∫£o ƒë∆∞·ª£c t√≠nh to√†n v·∫πn d·ªØ li·ªáu

- Trong th·ª±c t·∫ø `UDP` d√πng trong c√°c d·ªãch v·ª• `Stream` v√¨ n√≥ ∆∞u ti√™n t·ªëc ƒë·ªô n√™n ƒë√¥i l√∫c ph√≠a ng∆∞·ªùi coi s·∫Ω g√¢y ra m·ªù video, v√† ch·∫≠m ch·ªùn...

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-13-10-36-an5d7xV_700b.jpg" width="250">
:::

### Giao th·ª©c `DNS`

`Domain Name System` (*[DNS](https://vi.wikipedia.org/wiki/H%E1%BB%87_th%E1%BB%91ng_ph%C3%A2n_gi%E1%BA%A3i_t%C3%AAn_mi%E1%BB%81n)*) l√† h·ªá th·ªëng ph√¢n gi·∫£i t√™n mi·ªÅn, nhi·ªám v·ª• ƒë√≥ l√† chuy·ªÉn `ƒê·ªãa ch·ªâ t√™n` th√†nh `ƒë·ªãa ch·ªâ IP` v√† ng∆∞·ª£c l·∫°i

::: tip üí° GI·∫¢I TH√çCH

V√¨ tr√™n m·∫°ng ch·ªâ c√≥ th·ªÉ nh·∫≠n bi·∫øt c√°c ƒë·ªãa ch·ªâ th√¥ng qua `IP` ch·ª© kh√¥ng ph·∫£i t√™n 

> V√≠ d·ª• nh∆∞ google.com, th·ª±c ch·∫•t n√≥ c√≥ ƒë·ªãa ch·ªâ `172.217.24.238`, nh∆∞ng nh·ªù `DNS` m√† ta ch·ªâ c·∫ßn g√µ `google.com` th√¨ n√≥ s·∫Ω t·ª± ph√¢n gi·∫£i ra `IP`
>
> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-13-15-37-Screen%20Shot%202021-11-05%20at%2013.15.33.png">
:::

### Giao th·ª©c `SMTP` v√† `IMAP`

ƒê√¢y l√† m·ªôt trong nh·ªØng giao th·ª©c ph·ªï bi·∫øn trong `Email Server`

- `Simple Mail Transfer Protocol` (*[SMTP](https://vi.wikipedia.org/wiki/SMTP)*) l√† giao th·ª©c truy·ªÅn t·∫£i `email` ƒë∆°n gi·∫£n qua m·∫°ng `Internet` ch·∫≥ng h·∫°n nh∆∞ `Outlook`, `Gmail`... s·ª≠ d·ª•ng c·ªïng `25` trong giao th·ª©c `TCP`

- `Internet Access Message Protocol` (*[IMAP](https://vi.wikipedia.org/wiki/Internet_Message_Access_Protocol)*) l√† m·ªôt giao th·ª©c truy·ªÅn t·∫£i `email` t·ª´ m√°y ch·ªß nh·∫≠n, t·ª©c l√† b·∫°n ch·ªâ c√≥ th·ªÉ nh·∫≠n tin qua giao th·ª©c n√†y tr√™n c·ªïng `143`

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-13-27-43-5637427471319040.svg">

## 2.B√†i t·∫≠p 15

::: tip üí° M√î H√åNH

T·∫°o m√¥ h√¨nh m·∫°ng nh∆∞ sau:

<img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-13-25-25-Screen%20Shot%202021-11-05%20at%2013.25.18.png" width="500">
:::

### T·∫°o c√°c th∆∞ m·ª•c v√† c√°c file

T·∫°o c√°c th∆∞ m·ª•c v√† file theo m√¥ h√¨nh sau:

<img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-15-59-01-Screenshot%20from%202021-11-05%2015-58-27.png">

B·∫±ng nh·ªØng l·ªánh sau: 

```sh
mkdir ~/Desktop/BaiTap15
cd ~/Desktop/BaiTap15
mkdir pc router1 router2 webserver
touch lab.conf pc.startup router1.startup router2.startup webserver.startup
```

### Thi·∫øt l·∫≠p c√°c file

Trong c√°c file c·∫•u h√¨nh, h√£y c·∫•u h√¨nh theo m√¥ h√¨nh tr√™n nh∆∞ sau:

:::: tabs

  ::: tab lab.conf
  ```txt
  pc[0]=B
  router1[0]=A
  router1[1]=C
  router2[0]=B
  router2[1]=C
  webserver[0]=A
  ```
  :::

  ::: tab router1.startup
  ```txt
  ifconfig eth0 192.168.1.1/24 up
  ifconfig eth1 10.0.0.1/30 up
  route add -net 192.168.2.0/24 gw 10.0.0.2
  ```
  :::

  ::: tab router2.startup
  ```txt
  ifconfig eth0 192.168.2.1/24 up
  ifconfig eth1 10.0.0.2/30 up
  route add -net 192.168.2.1/24 gw 10.0.0.1
  ```
  :::

  ::: tab pc.startup
  ```txt
  ifconfig eth0 192.168.2.100/24 up
  route add default gw 192.168.2.1
  ```
  :::

  ::: tab webserver.startup
  ```txt
  ifconfig eth0 192.168.1.100/24 up
  route add default gw 192.168.1.1
  ```
  :::
::::

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-16-02-16-Screen%20Shot%202021-11-05%20at%2016.02.08.png">


### Kh·ªüi ƒë·ªông h·ªá th·ªëng m√°y ·∫£o

S·ª≠ d·ª•ng l·ªánh `kathara lstart` ƒë·ªÉ kh·ªüi ƒë·ªông h·ªá th·ªëng m√°y ·∫£o ƒë√£ t·∫°o:

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-16-03-13-Screen%20Shot%202021-11-05%20at%2016.03.08.png" width="600">

==> Kh√¥ng c√≥ l·ªói gi·ªØa c√°c `m√°y ·∫£o`
### Ch·∫°y d·ªãch v·ª• `WebServer`

ƒê·ªÉ ch·∫°y d·ªãch v·ª• `WebServer`, ta ph·∫£i kh·ªüi ƒë·ªông tr√™n `webserver` ph·∫ßn m·ªÅm `apache2` b·∫±ng l·ªánh sau:

```sh
/etc/init.d/apache2 start
```

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-16-06-47-Screen%20Shot%202021-11-05%20at%2016.06.41.png" width="430">
>
> ==> ƒê√£ kh·ªüi ƒë·ªông d·ªãch v·ª• `apache2` 

Tr√™n `pc` h√£y m·ªü d·ªãch v·ª• web b·∫±ng l·ªánh `links`

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-16-16-11-Screen%20Shot%202021-11-05%20at%2016.16.08.png" width="400">

::: tip üí° M·∫∏O

S·ª≠ d·ª•ng `F10` tr√™n `pc` ƒë·ªÉ m·ªü `Menu Bar` v√† thao t√°c t·ªõi tr√¨nh duy·ªát web
:::

Tr√™n `webserver` h√£y g√µ l·ªánh sau ƒë·ªÉ b·∫Øt c√°c g√≥i tin

```sh
tcpdump -s 1536 -w /shared/BaiTap15_webserver.pcap
```

Sau ƒë√≥ tr√™n `pc` h√£y b·∫•m v√†o `File => Go to URL` v√† nh·∫≠p `https://192.168.1.100` (*ƒë√¢y l√† ƒë·ªãa ch·ªâ c·ªßa `webserver`*)

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-16-27-03-Screen%20Shot%202021-11-05%20at%2016.26.46.png" width="400">
>
> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-17-16-02-Screen%20Shot%202021-11-05%20at%2017.15.54.png" width="500">

Sau ƒë√≥ tho√°t ra b·∫±ng c√°ch nh·∫•n `F10 => Exit`

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-17-16-44-Screen%20Shot%202021-11-05%20at%2017.16.20.png" width="350">

V√† d·ª´ng l·ªánh `tcpdump` tr√™n `pc` b·∫±ng `CTRL+C`

> <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/05-17-44-34-Screen%20Shot%202021-11-05%20at%2017.44.30.png">

### Ph√¢n t√≠ch g√≥i tin b·∫±ng `WireShark`

M·ªü file `BaiTap15_webserver.pcap` b·∫±ng ·ª©ng d·ª•ng `WireShark`


<comment/>
